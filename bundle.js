!function(e){var r={};function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r,t){"use strict";var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();var u={ADD:"+",SUB:"-",MUL:"ร",DIV:"รท",DOT:".",EQUAL:"=",ALL_CLEAR:"AC",CLEAR_ENTRY:"CE"},i=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._allClear()}return n(e,null,[{key:"_evaluateOperation",value:function(e){switch(e[1]){case u.ADD:return e[0]+e[2];case u.SUB:return e[0]-e[2];case u.DIV:return e[0]/e[2];case u.MUL:return e[0]*e[2];default:return NaN}}}]),n(e,[{key:"processInput",value:function(e){isNaN(parseFloat(this._currentNumber))&&this._allClear(),Number.isInteger(e)&&e>=0&&e<10?this._addDigit(e):e===u.DOT?this._addDecimalPoint():e===u.ALL_CLEAR?this._allClear():e===u.CLEAR_ENTRY?this._clearEntry():e===u.EQUAL?this._calculateExpression():e!==u.ADD&&e!==u.SUB&&e!==u.MUL&&e!==u.DIV||this._processOperation(e)}},{key:"_allClear",value:function(){this._currentNumber="0",this._currentExpression=[]}},{key:"_clearEntry",value:function(){this._currentNumber="0"}},{key:"_addDigit",value:function(e){3===this._currentExpression.length&&this._allClear(),"0"===this._currentNumber||isNaN(parseFloat(this._currentNumber))?this._currentNumber=e.toString():this._currentNumber+=e.toString()}},{key:"_addDecimalPoint",value:function(){this._currentNumber.includes(".")||(this._currentNumber+=".")}},{key:"_calculateExpression",value:function(){if(2===this._currentExpression.length){this._currentExpression.push(parseFloat(this._currentNumber));var r=e._evaluateOperation(this._currentExpression);!isNaN(r)&&isFinite(r)||(r="Undefined"),this._currentNumber=r.toString()}}},{key:"_processOperation",value:function(e){0===this._currentExpression.length?(this._currentExpression.push(parseFloat(this._currentNumber)),this._currentExpression.push(e),this._clearEntry()):2===this._currentExpression.length&&(this._calculateExpression(),this._currentExpression=[],this.processInput(e))}},{key:"currentNumber",get:function(){return this._currentNumber}},{key:"currentExpression",get:function(){return this._currentExpression.join(" ")}}]),e}();e.exports={OPERATIONS:u,Calculator:i}},function(e,r,t){"use strict";t(0).OPERATIONS;function n(e){var r,t,n=e.target.value,i=parseFloat(n);isNaN(i)?u.processInput(n):u.processInput(i),r=document.querySelector(".calculator__display__txt-main"),t=document.querySelector(".calculator__display__txt-sub"),r.innerHTML=u.currentNumber,t.innerHTML=u.currentExpression}for(var u=new(0,t(0).Calculator),i=document.querySelector(".calculator__buttons").children,s=0;s<i.length;s++)i[s].addEventListener("click",n)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NhbGN1bGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2FwcC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiT1BFUkFUSU9OUyIsIkFERCIsIlNVQiIsIk1VTCIsIkRJViIsIkRPVCIsIkVRVUFMIiwiQUxMX0NMRUFSIiwiQ0xFQVJfRU5UUlkiLCJDYWxjdWxhdG9yIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9hbGxDbGVhciIsImV4cHJlc3Npb24iLCJOYU4iLCJpbnB1dCIsImlzTmFOIiwicGFyc2VGbG9hdCIsIl9jdXJyZW50TnVtYmVyIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiX2FkZERpZ2l0IiwiX2FkZERlY2ltYWxQb2ludCIsIl9jbGVhckVudHJ5IiwiX2NhbGN1bGF0ZUV4cHJlc3Npb24iLCJfcHJvY2Vzc09wZXJhdGlvbiIsIl9jdXJyZW50RXhwcmVzc2lvbiIsImRpZ2l0IiwibGVuZ3RoIiwidG9TdHJpbmciLCJpbmNsdWRlcyIsInB1c2giLCJyZXN1bHQiLCJfZXZhbHVhdGVPcGVyYXRpb24iLCJpc0Zpbml0ZSIsIm9wZXJhdGlvbiIsInByb2Nlc3NJbnB1dCIsImpvaW4iLCJidXR0b25DbGlja2VkIiwiZXZlbnQiLCJudW1EaXNwbGF5IiwiZXhwRGlzcGxheSIsInRhcmdldCIsIm9wZXJhdGlvbk51bSIsImNhbGN1bGF0b3IiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lckhUTUwiLCJjdXJyZW50TnVtYmVyIiwiY3VycmVudEV4cHJlc3Npb24iLCJidXR0b25zIiwiY2hpbGRyZW4iLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLDJSQ2xFQSxJQUFNQyxHQUNKQyxJQUFLLElBQ0xDLElBQUssSUFDTEMsSUFBSyxJQUNMQyxJQUFLLElBQ0xDLElBQUssSUFDTEMsTUFB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Y2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvLyBEZWZpbmVkIG9wZXJhdGlvbnMgZm9yIHRoZSBjYWxjdWxhdG9yLlxuY29uc3QgT1BFUkFUSU9OUyA9IHtcbiAgQUREOiBcIitcIixcbiAgU1VCOiBcIi1cIixcbiAgTVVMOiBcIsOXXCIsXG4gIERJVjogXCLDt1wiLFxuICBET1Q6IFwiLlwiLFxuICBFUVVBTDogXCI9XCIsXG4gIEFMTF9DTEVBUjogXCJBQ1wiLFxuICBDTEVBUl9FTlRSWTogXCJDRVwiXG59O1xuXG4vKiBDbGFzcyBmb3IgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBjYWxjdWxhdG9yLiBBZnRlciBlYWNoXG5vcGVyYXRpb24gKG5ldyBkaWdpdCwgbmV3IG9wZXJhdG9yLCBjbGVhciBhbGwsIGV0Yy4pLCBpdCB1cGRhdGVzIHRoZVxuY3VycmVudCBudW1iZXIgYW5kIGN1cnJlbnQgZXhwcmVzc2lvbiBiZWluZyBwcm9jZXNzZWQuICovXG5jbGFzcyBDYWxjdWxhdG9yIHtcblxuICAvKiBFdmFsdWF0ZXMgYSBzaW5nbGUgbWF0aGVtYXRpY2FsIG9wZXJhdGlvbi4gSXQgdGFrZXMgYW4gYXJyYXkgd2l0aFxuICAzIGl0ZW1zLCBjb25zaXN0aW5nIG9mIHRoZSBudW1iZXJzIGFuZCBvcGVyYXRvciwgc3VjaCBhcyBbMSwgXCIrXCIsIDJdLCB3aGljaFxuICByZXR1cm5zIDMuICovXG4gIHN0YXRpYyBfZXZhbHVhdGVPcGVyYXRpb24oZXhwcmVzc2lvbikge1xuICAgIHN3aXRjaChleHByZXNzaW9uWzFdKSB7XG4gICAgICBjYXNlIE9QRVJBVElPTlMuQUREOlxuICAgICAgICByZXR1cm4gZXhwcmVzc2lvblswXSArIGV4cHJlc3Npb25bMl07XG4gICAgICBjYXNlIE9QRVJBVElPTlMuU1VCOlxuICAgICAgICByZXR1cm4gZXhwcmVzc2lvblswXSAtIGV4cHJlc3Npb25bMl07XG4gICAgICBjYXNlIE9QRVJBVElPTlMuRElWOlxuICAgICAgICByZXR1cm4gZXhwcmVzc2lvblswXSAvIGV4cHJlc3Npb25bMl07XG4gICAgICBjYXNlIE9QRVJBVElPTlMuTVVMOlxuICAgICAgICByZXR1cm4gZXhwcmVzc2lvblswXSAqIGV4cHJlc3Npb25bMl07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2FsbENsZWFyKCk7XG4gIH1cbiAgXG4gIC8vIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgbnVtYmVyLlxuICBnZXQgY3VycmVudE51bWJlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudE51bWJlcjtcbiAgfVxuICBcbiAgLy8gUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBleHByZXNzaW9uLlxuICBnZXQgY3VycmVudEV4cHJlc3Npb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRFeHByZXNzaW9uLmpvaW4oXCIgXCIpO1xuICB9XG4gIFxuICAvLyBQcm9jZXNzZXMgdGhlIG5leHQgaW5wdXQuXG4gIHByb2Nlc3NJbnB1dChpbnB1dCkge1xuICAgIC8vIElmIHdlIGhhdmUgYW4gdW5kZWZpbmVkIHJlc3VsdCwgZmlyc3QgY2xlYXIgZXZlcnl0aGluZy5cbiAgICBpZihpc05hTihwYXJzZUZsb2F0KHRoaXMuX2N1cnJlbnROdW1iZXIpKSlcbiAgICAgIHRoaXMuX2FsbENsZWFyKCk7XG4gICAgXG4gICAgaWYoTnVtYmVyLmlzSW50ZWdlcihpbnB1dCkgJiYgaW5wdXQgPj0gMCAmJiBpbnB1dCA8IDEwKVxuICAgICAgdGhpcy5fYWRkRGlnaXQoaW5wdXQpO1xuICAgIGVsc2UgaWYoaW5wdXQgPT09IE9QRVJBVElPTlMuRE9UKVxuICAgICAgdGhpcy5fYWRkRGVjaW1hbFBvaW50KCk7XG4gICAgZWxzZSBpZihpbnB1dCA9PT0gT1BFUkFUSU9OUy5BTExfQ0xFQVIpXG4gICAgICB0aGlzLl9hbGxDbGVhcigpO1xuICAgIGVsc2UgaWYoaW5wdXQgPT09IE9QRVJBVElPTlMuQ0xFQVJfRU5UUlkpXG4gICAgICB0aGlzLl9jbGVhckVudHJ5KCk7XG4gICAgZWxzZSBpZihpbnB1dCA9PT0gT1BFUkFUSU9OUy5FUVVBTClcbiAgICAgIHRoaXMuX2NhbGN1bGF0ZUV4cHJlc3Npb24oKTtcbiAgICBlbHNlIGlmKGlucHV0ID09PSBPUEVSQVRJT05TLkFERCB8fCBpbnB1dCA9PT0gT1BFUkFUSU9OUy5TVUJcbiAgICAgICB8fCBpbnB1dCA9PT0gT1BFUkFUSU9OUy5NVUwgfHwgaW5wdXQgPT09IE9QRVJBVElPTlMuRElWKSB7XG4gICAgICB0aGlzLl9wcm9jZXNzT3BlcmF0aW9uKGlucHV0KTtcbiAgICB9XG4gIH1cblxuICAvLyBSZXNldHMgdGhlIHN0YXRlIG9mIHRoZSBjYWxjdWxhdG9yLlxuICBfYWxsQ2xlYXIoKSB7XG4gICAgdGhpcy5fY3VycmVudE51bWJlciA9IFwiMFwiO1xuICAgIHRoaXMuX2N1cnJlbnRFeHByZXNzaW9uID0gW107XG4gIH1cblxuICAvLyBDbGVhcnMgdGhlIGN1cnJlbnQgbnVtYmVyLlxuICBfY2xlYXJFbnRyeSgpIHtcbiAgICB0aGlzLl9jdXJyZW50TnVtYmVyID0gXCIwXCI7XG4gIH1cblxuICAvKiBQdXNoZXMgdGhlIG1vc3QgcmVjZW50bHkgZW50ZXJlZCBkaWdpdCB0byB0aGUgZW5kIG9mIHRoZSBjdXJyZW50XG4gIG51bWJlci4gKi9cbiAgX2FkZERpZ2l0KGRpZ2l0KSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBqdXN0IGNhbGN1bGF0ZWQgc29tZXRoaW5nLCBmaXJzdCBjbGVhciBldmVyeXRoaW5nLlxuICAgIGlmKHRoaXMuX2N1cnJlbnRFeHByZXNzaW9uLmxlbmd0aCA9PT0gMylcbiAgICAgIHRoaXMuX2FsbENsZWFyKCk7XG4gICAgXG4gICAgaWYodGhpcy5fY3VycmVudE51bWJlciA9PT0gXCIwXCIgfHwgaXNOYU4ocGFyc2VGbG9hdCh0aGlzLl9jdXJyZW50TnVtYmVyKSkpXG4gICAgICB0aGlzLl9jdXJyZW50TnVtYmVyID0gZGlnaXQudG9TdHJpbmcoKTtcbiAgICBlbHNlXG4gICAgICB0aGlzLl9jdXJyZW50TnVtYmVyICs9IGRpZ2l0LnRvU3RyaW5nKCk7XG4gIH1cblxuICAvLyBBZGRzIGEgZGVjaW1hbCBwb2ludCB0byB0aGUgY3VycmVudCBudW1iZXIsIGlmIGl0IGRvZXNuJ3QgYWxyZWFkeSBoYXZlIG9uZS5cbiAgX2FkZERlY2ltYWxQb2ludCgpIHtcbiAgICBpZighdGhpcy5fY3VycmVudE51bWJlci5pbmNsdWRlcyhcIi5cIikpXG4gICAgICB0aGlzLl9jdXJyZW50TnVtYmVyICs9IFwiLlwiO1xuICB9XG4gIFxuICAvKiBDYWxjdWxhdGVzIHRoZSBjdXJyZW50IGV4cHJlc3Npb24sIGlmIHZhbGlkLiBJZiBhbiB1bmRlZmluZWQgb3BlcmF0aW9uXG4gIG9jY3VycyAoZS5nLiwgZGl2aXNpb24gYnkgemVybyksIGl0IHB1dHMgYW4gZXJyb3IgbWVzc2FnZSBpbnRvIHRoZSBjdXJyZW50XG4gIG51bWJlci4gKi9cbiAgX2NhbGN1bGF0ZUV4cHJlc3Npb24oKSB7XG4gICAgaWYodGhpcy5fY3VycmVudEV4cHJlc3Npb24ubGVuZ3RoID09PSAyKSB7XG4gICAgICB0aGlzLl9jdXJyZW50RXhwcmVzc2lvbi5wdXNoKHBhcnNlRmxvYXQodGhpcy5fY3VycmVudE51bWJlcikpO1xuICAgICAgbGV0IHJlc3VsdCA9IENhbGN1bGF0b3IuX2V2YWx1YXRlT3BlcmF0aW9uKHRoaXMuX2N1cnJlbnRFeHByZXNzaW9uKTtcbiAgICAgIGlmKGlzTmFOKHJlc3VsdCkgfHwgIWlzRmluaXRlKHJlc3VsdCkpXG4gICAgICAgIHJlc3VsdCA9IFwiVW5kZWZpbmVkXCI7XG4gICAgICB0aGlzLl9jdXJyZW50TnVtYmVyID0gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBBZGRzIHRoZSBvcGVyYXRpb24gdG8gdGhlIGN1cnJlbnQgZXhwcmVzc2lvbiwgaWYgcG9zc2libGUuXG4gIF9wcm9jZXNzT3BlcmF0aW9uKG9wZXJhdGlvbikge1xuICAgIC8vIEN1cnJlbnQgZXhwcmVzc2lvbiBpcyBlbXB0eSwgc28gd2UgYWRkIHRoZSBjdXJyZW50IG51bWJlciBhbmQgb3BlcmF0aW9uLlxuICAgIGlmKHRoaXMuX2N1cnJlbnRFeHByZXNzaW9uLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fY3VycmVudEV4cHJlc3Npb24ucHVzaChwYXJzZUZsb2F0KHRoaXMuX2N1cnJlbnROdW1iZXIpKTtcbiAgICAgIHRoaXMuX2N1cnJlbnRFeHByZXNzaW9uLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgIHRoaXMuX2NsZWFyRW50cnkoKTtcbiAgICB9XG4gICAgLyogQ3VycmVudCBleHByZXNzaW9uIGlzIGFsbW9zdCBmdWxsLCBzbyB3ZSBjYWxjdWxhdGUsIGNsZWFyIHRoZVxuICAgIGN1cnJlbnQgZXhwcmVzc2lvbiBhbmQgYWRkIHRoZSBvcGVyYXRpb24gYXMgYSBuZXcgaW5wdXQuICovXG4gICAgZWxzZSBpZih0aGlzLl9jdXJyZW50RXhwcmVzc2lvbi5sZW5ndGggPT09IDIpIHtcbiAgICAgIHRoaXMuX2NhbGN1bGF0ZUV4cHJlc3Npb24oKTtcbiAgICAgIHRoaXMuX2N1cnJlbnRFeHByZXNzaW9uID0gW107XG4gICAgICB0aGlzLnByb2Nlc3NJbnB1dChvcGVyYXRpb24pO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtPUEVSQVRJT05TLCBDYWxjdWxhdG9yfTsiLCIvKiBNYWluIHNjcmlwdCBvZiB0aGUgYXBwbGljYXRpb24sIHRyYW5zbGF0aW5nIHVzZXIgaW5wdXQgaW50byBsb2dpY2FsXG5vcGVyYXRpb25zIGFuZCB1cGRhdGluZyB0aGUgR1VJIGFjY29yZGluZyB0byB0aGUgb3V0cHV0IGZyb20gdGhlIENhbGN1bGF0b3Jcbm9iamVjdC4gKi9cblxuY29uc3QgT1BFUkFUSU9OUyA9IHJlcXVpcmUoXCIuL2NhbGN1bGF0b3IuanNcIikuT1BFUkFUSU9OUztcbmNvbnN0IENhbGN1bGF0b3IgPSByZXF1aXJlKFwiLi9jYWxjdWxhdG9yLmpzXCIpLkNhbGN1bGF0b3I7XG5cbmZ1bmN0aW9uIGJ1dHRvbkNsaWNrZWQoZXZlbnQpIHtcbiAgbGV0IG9wZXJhdGlvbiA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgbGV0IG9wZXJhdGlvbk51bSA9IHBhcnNlRmxvYXQob3BlcmF0aW9uKTtcbiAgaWYoaXNOYU4ob3BlcmF0aW9uTnVtKSlcbiAgICBjYWxjdWxhdG9yLnByb2Nlc3NJbnB1dChvcGVyYXRpb24pO1xuICBlbHNlXG4gICAgY2FsY3VsYXRvci5wcm9jZXNzSW5wdXQob3BlcmF0aW9uTnVtKTtcbiAgdXBkYXRlRGlzcGxheSgpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkge1xuICBsZXQgbnVtRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FsY3VsYXRvcl9fZGlzcGxheV9fdHh0LW1haW5cIik7XG4gIGxldCBleHBEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYWxjdWxhdG9yX19kaXNwbGF5X190eHQtc3ViXCIpO1xuICBcbiAgbnVtRGlzcGxheS5pbm5lckhUTUwgPSBjYWxjdWxhdG9yLmN1cnJlbnROdW1iZXI7XG4gIGV4cERpc3BsYXkuaW5uZXJIVE1MID0gY2FsY3VsYXRvci5jdXJyZW50RXhwcmVzc2lvbjtcbn1cblxubGV0IGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpO1xubGV0IGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbGN1bGF0b3JfX2J1dHRvbnNcIikuY2hpbGRyZW47XG5mb3IobGV0IGkgPSAwOyBpIDwgYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICBidXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBidXR0b25DbGlja2VkKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9